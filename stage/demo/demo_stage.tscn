[gd_scene load_steps=14 format=4 uid="uid://kqkvasn678ry"]

[ext_resource type="Script" uid="uid://d22scmdflkulk" path="res://stage/demo/demo_stage.gd" id="1_3sebb"]
[ext_resource type="TileSet" uid="uid://c6jlxm4wokjti" path="res://stage/demo/tilemap/demo_floor.tres" id="2_ln17t"]
[ext_resource type="PackedScene" uid="uid://c37uogod3vrww" path="res://entity/sapper/sapper.tscn" id="2_w7nxb"]
[ext_resource type="TileSet" uid="uid://deu2u6slac2vq" path="res://stage/demo/tilemap/demo_desert.tres" id="3_jj4g0"]
[ext_resource type="TileSet" uid="uid://2d7hcthqc830" path="res://stage/demo/tilemap/demo_walls.tres" id="3_k46ji"]
[ext_resource type="TileSet" uid="uid://bjea5f63ldn35" path="res://stage/demo/tilemap/demo_acid.tres" id="3_ln17t"]
[ext_resource type="PackedScene" uid="uid://qb3w45t4vdnh" path="res://entity/gun/light/light_gun.tscn" id="4_4royo"]
[ext_resource type="Script" uid="uid://tf36ugicuoyh" path="res://stage/demo/demo_controls.gd" id="4_vte7o"]
[ext_resource type="TileSet" uid="uid://c1xug7auajvfn" path="res://stage/demo/tilemap/demo_dummies.tres" id="5_k46ji"]
[ext_resource type="Script" uid="uid://bd046eokvcnu2" path="res://addons/phantom_camera/scripts/phantom_camera_host/phantom_camera_host.gd" id="9_xrwbm"]
[ext_resource type="Script" uid="uid://bhexx6mj1xv3q" path="res://addons/phantom_camera/scripts/phantom_camera/phantom_camera_2d.gd" id="10_jj4g0"]
[ext_resource type="Script" uid="uid://8umksf8e80fw" path="res://addons/phantom_camera/scripts/resources/tween_resource.gd" id="11_dk5wi"]

[sub_resource type="Resource" id="Resource_fxrrq"]
script = ExtResource("11_dk5wi")
duration = 0.0

[node name="DemoStage" type="Node2D"]
script = ExtResource("1_3sebb")

[node name="Map" type="Node2D" parent="."]

[node name="TileMapFloor" type="TileMapLayer" parent="Map"]
position = Vector2(-82, -12)
tile_map_data = PackedByteArray("AAD/////AwABAAEAAAAAAP//AwABAAEAAAD//wAAAwABAAEAAAAAAAAAAwABAAEAAAABAAAAAwABAAEAAAABAP//AwABAAEAAAABAP7/AwABAAEAAAAAAP7/AwABAAEAAAD///7/AwABAAEAAAD+/wAAAwABAAEAAAD+////AwABAAEAAAD+//7/AwABAAEAAAAEAAIAAwADAAMAAAAEAAEAAwADAAEAAAAEAAAAAwADAAEAAAAEAP//AwADAAEAAAAEAP7/AwADAAEAAAAEAP3/AwADAAEAAAAEAPz/AwADAAAAAAADAAIAAwACAAMAAAADAAEAAwABAAEAAAADAAAAAwABAAEAAAADAP//AwABAAEAAAADAP7/AwABAAEAAAADAP3/AwABAAEAAAADAPz/AwABAAAAAAACAAIAAwACAAMAAAACAAEAAwABAAEAAAACAAAAAwABAAEAAAACAP//AwABAAEAAAACAP7/AwABAAEAAAACAP3/AwABAAEAAAACAPz/AwABAAAAAAABAAIAAwACAAMAAAABAAEAAwABAAEAAAABAP3/AwABAAEAAAABAPz/AwABAAAAAAAAAAIAAwACAAMAAAAAAAEAAwABAAEAAAAAAP3/AwABAAEAAAAAAPz/AwABAAAAAAD//wIAAwACAAMAAAD//wEAAwABAAEAAAD///3/AwABAAEAAAD///z/AwABAAAAAAD+/wIAAwACAAMAAAD+/wEAAwABAAEAAAD+//3/AwABAAEAAAD+//z/AwABAAAAAAD9/wIAAwACAAMAAAD9/wEAAwABAAEAAAD9/wAAAwABAAEAAAD9////AwABAAEAAAD9//7/AwABAAEAAAD9//3/AwABAAEAAAD9//z/AwABAAAAAAD8/wIAAwAAAAMAAAD8/wEAAwAAAAIAAAD8/wAAAwAAAAIAAAD8////AwAAAAIAAAD8//7/AwAAAAIAAAD8//3/AwAAAAIAAAD8//z/AwAAAAAAAAA=")
tile_set = ExtResource("2_ln17t")

[node name="TileMapDesert" type="TileMapLayer" parent="Map"]
tile_map_data = PackedByteArray("AAAEAAEAAAACAAAAAAAEAAAAAAAGAAAAAAAEAP//AAAGAAAAAAADAAEAAAACAAAAAAADAAAAAAAGAAAAAAADAP//AAAGAAAAAAADAP7/AAACAAAAAAACAAMAAAACAAAAAAACAAIAAAAGAAAAAAACAAEAAAACAAAAAAACAAAAAAAEAAAAAAACAP//AAAAAAAAAAACAP7/AAACAAAAAAACAP3/AAAGAAAAAAABAAMAAAAAAAAAAAABAAIAAAAEAAAAAAABAAEAAAAGAAAAAAABAAAAAAAEAAAAAAABAP//AAAAAAAAAAABAP7/AAAEAAAAAAABAP3/AAAEAAAAAAAAAAMAAAACAAAAAAAAAAIAAAACAAAAAAAAAAEAAAACAAAAAAAAAAAAAAACAAAAAAAAAP//AAAGAAAAAAAAAP7/AAAEAAAAAAAAAP3/AAAAAAAAAAD//wMAAAACAAAAAAD//wIAAAACAAAAAAD//wEAAAAEAAAAAAD//wAAAAAGAAAAAAD/////AAACAAAAAAD///7/AAAAAAAAAAD///3/AAAAAAAAAAD+/wMAAAAAAAAAAAD+/wIAAAACAAAAAAD+/wEAAAAGAAAAAAD+/wAAAAAAAAAAAAD+////AAACAAAAAAD+//7/AAAEAAAAAAD+//3/AAAAAAAAAAD9/wIAAAAGAAAAAAD9/wEAAAAEAAAAAAD9/wAAAAAAAAAAAAD9////AAAGAAAAAAD9//7/AAAGAAAAAAD8/wEAAAACAAAAAAD8/wAAAAAGAAAAAAD8////AAAAAAAAAAADAAIAAAAAAAAAAAA=")
tile_set = ExtResource("3_jj4g0")

[node name="TileMapAcid" type="TileMapLayer" parent="Map"]
tile_map_data = PackedByteArray("AAAEAAIAAAAAAAAAAgADAAIAAAAAAAAAAgADAAEAAAAAAAAAAgAEAAEAAAAAAAAAAgACAAMAAAAAAAAAAgADAAMAAAAAAAAAAgABAAMAAAAAAAAAAgAAAAQAAAAAAAAAAgABAAQAAAAAAAAAAgACAAQAAAAAAAAAAgA=")
tile_set = ExtResource("3_ln17t")

[node name="TileMapDesertObjects" type="TileMapLayer" parent="Map"]
tile_map_data = PackedByteArray("AAADAAEAAAACAAIAAAAEAAAAAAAAAAIAAAD8////AAACAAIAAAACAP3/AAAAAAIAAAABAAMAAAAGAAIAAAAAAAMAAAAEAAIAAAADAAAAAAAEAAIAAAADAP7/AAAGAAIAAAABAP3/AAAEAAIAAAD8/wEAAAACAAQAAAAAAP7/AAAAAAQAAAD+/wMAAAAGAAQAAAA=")
tile_set = ExtResource("3_jj4g0")

[node name="TileMapWalls" type="TileMapLayer" parent="Map"]
tile_map_data = PackedByteArray("AAD7//z/AgAEAAAAAAD7//3/AgAAAAEAAAD7//7/AgAAAAEAAAD7////AgAAAAEAAAD7/wAAAgAAAAEAAAD7/wEAAgAAAAEAAAD7/wIAAgAAAAEAAAD7/wMAAgAAAAEAAAADAPz/AgACAAMAAAAEAPz/AgAGAAAAAAAEAP3/AgAAAAEAAAAEAP7/AgAAAAEAAAAEAP//AgAAAAEAAAAEAAAAAgAAAAEAAAAEAAEAAgAEAAIAAAAFAAEAAgAGAAAAAAAFAAIAAgAAAAEAAAAFAAMAAgAGAAIAAAAEAAMAAgAEAAAAAAAEAAQAAgAGAAIAAAADAAQAAgAEAAAAAAADAAUAAgAGAAIAAAACAAUAAgACAAMAAAABAAUAAgABAAMAAAD9//r/AgAAAAAAAAD9//v/AgAGAAIAAAD8//v/AgAEAAAAAAD8//z/AgAGAAIAAAAAAPr/AgAAAAAAAAAAAPv/AgAEAAIAAAABAPv/AgAGAAAAAAABAPz/AgAEAAIAAAACAPz/AgACAAMAAAD7/wQAAgAEAAIAAAD8/wQAAgAGAAAAAAD8/wUAAgAEAAIAAAD9/wUAAgADAAMAAAA=")
tile_set = ExtResource("3_k46ji")

[node name="TileMapEnemies" type="TileMapLayer" parent="Map"]
tile_map_data = PackedByteArray("AAD9/wIAAAAAAAAAAQADAAIAAAAAAAAAAQADAAEAAAAAAAAAAQADAAAAAAAAAAAAAQADAP//AAAAAAAAAQD//wIAAAAAAAAAAgA=")
tile_set = ExtResource("5_k46ji")

[node name="Sapper" parent="." instance=ExtResource("2_w7nxb")]
unique_name_in_owner = true

[node name="LightGun" parent="Sapper" instance=ExtResource("4_4royo")]
unique_name_in_owner = true

[node name="DemoControls" type="Node2D" parent="."]
script = ExtResource("4_vte7o")

[node name="SpawnDummyTimer" type="Timer" parent="."]
wait_time = 3.0
autostart = true

[node name="Camera2D" type="Camera2D" parent="."]
physics_interpolation_mode = 1
zoom = Vector2(7, 7)

[node name="PhantomCameraHost" type="Node" parent="Camera2D"]
process_priority = 300
process_physics_priority = 300
script = ExtResource("9_xrwbm")
metadata/_custom_type_script = "uid://bd046eokvcnu2"

[node name="PhantomCamera2D" type="Node2D" parent="." node_paths=PackedStringArray("follow_target")]
top_level = true
script = ExtResource("10_jj4g0")
follow_mode = 5
follow_target = NodePath("../Sapper")
zoom = Vector2(7, 7)
tween_resource = SubResource("Resource_fxrrq")
follow_damping = true
follow_damping_value = Vector2(0.2, 0.2)
dead_zone_width = 0.07
dead_zone_height = 0.04
metadata/_custom_type_script = "uid://bhexx6mj1xv3q"

[connection signal="is_moving_changed" from="DemoControls" to="." method="_on_demo_controls_is_moving_changed"]
[connection signal="move_direction_changed" from="DemoControls" to="." method="_on_demo_controls_move_direction_changed"]
[connection signal="pointer_click" from="DemoControls" to="." method="_on_demo_controls_pointer_click"]
[connection signal="pointer_position_changed" from="DemoControls" to="." method="_on_demo_controls_pointer_position_changed"]
[connection signal="roll_pressed" from="DemoControls" to="." method="_on_demo_controls_roll_pressed"]
[connection signal="timeout" from="SpawnDummyTimer" to="." method="_on_spawn_dummy_timer_timeout"]
